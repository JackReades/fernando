'use strict';

var _ = require('underscore');
var expect = require('chai').expect;

var ProxyLists = require('../../../index');

describe('source.hidemyass', function() {

	var hidemyass = require('../../../sources/hidemyass');

	describe('parseResponseData(data, cb)', function() {

		it('should be a function', function() {

			expect(hidemyass.parseResponseData).to.be.a('function');
		});

		it('should parse the response data into an array of proxies', function(done) {

			var data = '{\"table\":\"<!-- used for AJAX call, gives only port table content --> <tr class=\\\"\\\" rel=\\\"20257533\\\"> <td class=\\\"leftborder timestamp\\\" rel=\\\"1445766276\\\"><span class=\\\"updatets \\\">48secs<\\/span><\\/td> <td><span><style>.lT2a{display:none}\\n.U0dT{display:inline}\\n.tWcT{display:none}\\n.eezK{display:inline}\\n.Nb93{display:none}\\n.kdpu{display:inline}\\n.txBU{display:none}\\n.PjQ-{display:inline}<\\/style><span style=\\\"display:none\\\">73<\\/span><span class=\\\"U0dT\\\">175<\\/span><span style=\\\"display:none\\\">238<\\/span><div style=\\\"display:none\\\">246<\\/div><span class=\\\"117\\\">.<\\/span><span style=\\\"display:none\\\">5<\\/span><span class=\\\"tWcT\\\">5<\\/span><div style=\\\"display:none\\\">5<\\/div><span class=\\\"lT2a\\\">7<\\/span><span><\\/span><span style=\\\"display:none\\\">45<\\/span><span class=\\\"txBU\\\">45<\\/span><span style=\\\"display:none\\\">49<\\/span><span class=\\\"lT2a\\\">49<\\/span><div style=\\\"display:none\\\">49<\\/div><span class=\\\"Nb93\\\">57<\\/span><span><\\/span><span class=\\\"Nb93\\\">61<\\/span><div style=\\\"display:none\\\">61<\\/div><span class=\\\"txBU\\\">73<\\/span><div style=\\\"display:none\\\">73<\\/div><span style=\\\"display:none\\\">79<\\/span><span class=\\\"tWcT\\\">79<\\/span><div style=\\\"display:none\\\">79<\\/div><div style=\\\"display:none\\\">82<\\/div><span class=\\\"tWcT\\\">92<\\/span><div style=\\\"display:none\\\">92<\\/div><span class=\\\"tWcT\\\">124<\\/span><span style=\\\"display:none\\\">125<\\/span><div style=\\\"display:none\\\">125<\\/div>138<span style=\\\"display:none\\\">147<\\/span><div style=\\\"display:none\\\">147<\\/div><span style=\\\"display:none\\\">148<\\/span><span class=\\\"lT2a\\\">148<\\/span><span><\\/span><span style=\\\"display:none\\\">160<\\/span><span style=\\\"display:none\\\">193<\\/span><span style=\\\"display:none\\\">200<\\/span><span class=\\\"tWcT\\\">200<\\/span><div style=\\\"display:none\\\">200<\\/div><div style=\\\"display:none\\\">220<\\/div><span style=\\\"display:none\\\">224<\\/span><span class=\\\"tWcT\\\">224<\\/span><div style=\\\"display:none\\\">224<\\/div><span class=\\\"tWcT\\\">239<\\/span><span><\\/span><span style=\\\"display:none\\\">248<\\/span><span class=\\\"lT2a\\\">248<\\/span><span><\\/span><span class=\\\"240\\\">.<\\/span><span class=\\\"eezK\\\">67<\\/span><span class=\\\"txBU\\\">102<\\/span><div style=\\\"display:none\\\">102<\\/div><span style=\\\"display:none\\\">231<\\/span><span class=\\\"tWcT\\\">231<\\/span><span style=\\\"display: inline\\\">.<\\/span><span style=\\\"display: inline\\\">66<\\/span><span class=\\\"lT2a\\\">80<\\/span><div style=\\\"display:none\\\">82<\\/div><span style=\\\"display:none\\\">98<\\/span><span><\\/span><span class=\\\"Nb93\\\">107<\\/span><div style=\\\"display:none\\\">127<\\/div><\\/span><\\/td> <td>8888<\\/td> <td style=\\\"text-align:left\\\" rel=\\\"my\\\"><span class=\\\"country\\\" style=\\\"white-space:nowrap;\\\"> <img src=\\\"\\/images\\/1x1.png\\\" style=\\\"width: 16px; height: 11px; margin-right: 5px;\\\" class=\\\"flags-my\\\" alt=\\\"flag \\\"\\/>Malaysia<\\/span><\\/td> <td> <div class=\\\"progress-indicator\\\" style=\\\"width: 114px\\\" value=\\\"7646\\\" levels=\\\"speed\\\" rel=\\\"7646\\\"> <div class=\\\"indicator\\\" style=\\\"width: 24%; background-color: rgb(237, 28, 36)\\\"><\\/div><\\/div> <\\/td> <td> <div class=\\\"progress-indicator \\\" style=\\\"width: 114px\\\" title=\\\"\\\" rel=\\\"272\\\" value=\\\"272\\\" levels=\\\"speed\\\"> <div class=\\\"indicator\\\" style=\\\"width: 95%; background-color: rgb(0, 173, 173)\\\"><\\/div> <\\/div> <\\/td> <td>HTTPS<\\/td> <td nowrap>High +KA<\\/td> <\\/tr> <tr class=\\\"altshade\\\" rel=\\\"20257531\\\"> <td class=\\\"leftborder timestamp\\\" rel=\\\"1445766207\\\"><span class=\\\"updatets \\\">1min<\\/span><\\/td> <td><span><style>.vbrA{display:none}\\n.Pp2z{display:inline}\\n.twK3{display:none}\\n.oGqV{display:inline}\\n.w5rw{display:none}\\n.OsN5{display:inline}<\\/style><span class=\\\"171\\\">183<\\/span><span style=\\\"display:none\\\">211<\\/span><span class=\\\"twK3\\\">211<\\/span><div style=\\\"display:none\\\">211<\\/div><span class=\\\"Pp2z\\\">.<\\/span><span class=\\\"twK3\\\">55<\\/span><div style=\\\"display:none\\\">55<\\/div><span style=\\\"display: inline\\\">89<\\/span><span style=\\\"display:none\\\">155<\\/span><div style=\\\"display:none\\\">155<\\/div><span style=\\\"display:none\\\">224<\\/span><div style=\\\"display:none\\\">224<\\/div><span style=\\\"display:none\\\">250<\\/span><span class=\\\"w5rw\\\">250<\\/span><div style=\\\"display:none\\\">250<\\/div><span class=\\\"oGqV\\\">.<\\/span><span style=\\\"display:none\\\">71<\\/span><span><\\/span><span style=\\\"display:none\\\">79<\\/span><span class=\\\"w5rw\\\">79<\\/span><div style=\\\"display:none\\\">79<\\/div><span class=\\\"23\\\">213<\\/span><span class=\\\"oGqV\\\">.<\\/span><span class=\\\"vbrA\\\">78<\\/span><div style=\\\"display:none\\\">180<\\/div><span style=\\\"display:none\\\">206<\\/span><div style=\\\"display:none\\\">206<\\/div><span class=\\\"65\\\">238<\\/span><\\/span><\\/td> <td>8080<\\/td> <td style=\\\"text-align:left\\\" rel=\\\"th\\\"><span class=\\\"country\\\" style=\\\"white-space:nowrap;\\\"> <img src=\\\"\\/images\\/1x1.png\\\" style=\\\"width: 16px; height: 11px; margin-right: 5px;\\\" class=\\\"flags-th\\\" alt=\\\"flag \\\"\\/>Thailand<\\/span><\\/td> <td> <div class=\\\"progress-indicator\\\" style=\\\"width: 114px\\\" value=\\\"6321\\\" levels=\\\"speed\\\" rel=\\\"6321\\\"> <div class=\\\"indicator\\\" style=\\\"width: 37%; background-color: rgb(255, 204, 0)\\\"><\\/div><\\/div> <\\/td> <td> <div class=\\\"progress-indicator \\\" style=\\\"width: 114px\\\" title=\\\"\\\" rel=\\\"324\\\" value=\\\"324\\\" levels=\\\"speed\\\"> <div class=\\\"indicator\\\" style=\\\"width: 94%; background-color: rgb(0, 173, 173)\\\"><\\/div> <\\/div> <\\/td> <td>HTTPS<\\/td> <td nowrap>High +KA<\\/td> <\\/tr> <tr class=\\\"\\\" rel=\\\"20257532\\\"> <td class=\\\"leftborder timestamp\\\" rel=\\\"1445766207\\\"><span class=\\\"updatets \\\">1min<\\/span><\\/td> <td><span><style>.A6rp{display:none}\\n.i5Lj{display:inline}\\n.kd_b{display:none}\\n.KCox{display:inline}<\\/style><span style=\\\"display: inline\\\">158<\\/span><span class=\\\"A6rp\\\">178<\\/span><span class=\\\"KCox\\\">.<\\/span>69<span style=\\\"display: inline\\\">.<\\/span><span><\\/span><span class=\\\"A6rp\\\">93<\\/span><div style=\\\"display:none\\\">93<\\/div><span class=\\\"A6rp\\\">113<\\/span><span><\\/span>146<span class=\\\"A6rp\\\">155<\\/span><div style=\\\"display:none\\\">155<\\/div><span style=\\\"display:none\\\">167<\\/span><span class=\\\"kd_b\\\">167<\\/span><span><\\/span><span style=\\\"display:none\\\">179<\\/span><div style=\\\"display:none\\\">179<\\/div><span style=\\\"display:none\\\">214<\\/span><span class=\\\"kd_b\\\">214<\\/span><span style=\\\"display:none\\\">220<\\/span><span class=\\\"A6rp\\\">220<\\/span><div style=\\\"display:none\\\">220<\\/div><span class=\\\"A6rp\\\">235<\\/span><span style=\\\"display:none\\\">241<\\/span><span class=\\\"kd_b\\\">241<\\/span><div style=\\\"display:none\\\">241<\\/div><span class=\\\"i5Lj\\\">.<\\/span><span class=\\\"i5Lj\\\">5<\\/span><span class=\\\"A6rp\\\">221<\\/span><span><\\/span><\\/span><\\/td> <td>80<\\/td> <td style=\\\"text-align:left\\\" rel=\\\"us\\\"><span class=\\\"country\\\" style=\\\"white-space:nowrap;\\\"> <img src=\\\"\\/images\\/1x1.png\\\" style=\\\"width: 16px; height: 11px; margin-right: 5px;\\\" class=\\\"flags-us\\\" alt=\\\"flag \\\"\\/>USA<\\/span><\\/td> <td> <div class=\\\"progress-indicator\\\" style=\\\"width: 114px\\\" value=\\\"5316\\\" levels=\\\"speed\\\" rel=\\\"5316\\\"> <div class=\\\"indicator\\\" style=\\\"width: 47%; background-color: rgb(255, 204, 0)\\\"><\\/div><\\/div> <\\/td> <td> <div class=\\\"progress-indicator \\\" style=\\\"width: 114px\\\" title=\\\"\\\" rel=\\\"98\\\" value=\\\"98\\\" levels=\\\"speed\\\"> <div class=\\\"indicator\\\" style=\\\"width: 100%; background-color: rgb(0, 173, 173)\\\"><\\/div> <\\/div> <\\/td> <td>HTTPS<\\/td> <td nowrap>High +KA<\\/td> <\\/tr> <tr class=\\\"altshade\\\" rel=\\\"20257529\\\"> <td class=\\\"leftborder timestamp\\\" rel=\\\"1445766035\\\"><span class=\\\"updatets \\\">4mins<\\/span><\\/td> <td><span><style>.gX6y{display:none}\\n.cqA1{display:inline}\\n.AFTK{display:none}\\n.AX8B{display:inline}<\\/style><span class=\\\"AX8B\\\">120<\\/span><span style=\\\"display:none\\\">194<\\/span><span class=\\\"AFTK\\\">194<\\/span><div style=\\\"display:none\\\">194<\\/div><span class=\\\"232\\\">.<\\/span><span class=\\\"152\\\">198<\\/span><span class=\\\"cqA1\\\">.<\\/span><span class=\\\"196\\\">236<\\/span><span style=\\\"display: inline\\\">.<\\/span><span class=\\\"AX8B\\\">10<\\/span><span style=\\\"display:none\\\">40<\\/span><div style=\\\"display:none\\\">40<\\/div><span style=\\\"display:none\\\">133<\\/span><div style=\\\"display:none\\\">133<\\/div><span><\\/span><span class=\\\"AFTK\\\">243<\\/span><span><\\/span><\\/span><\\/td> <td>8084<\\/td> <td style=\\\"text-align:left\\\" rel=\\\"cn\\\"><span class=\\\"country\\\" style=\\\"white-space:nowrap;\\\"> <img src=\\\"\\/images\\/1x1.png\\\" style=\\\"width: 16px; height: 11px; margin-right: 5px;\\\" class=\\\"flags-cn\\\" alt=\\\"flag \\\"\\/>China<\\/span><\\/td> <td> <div class=\\\"progress-indicator\\\" style=\\\"width: 114px\\\" value=\\\"5383\\\" levels=\\\"speed\\\" rel=\\\"5383\\\"> <div class=\\\"indicator\\\" style=\\\"width: 46%; background-color: rgb(255, 204, 0)\\\"><\\/div><\\/div> <\\/td> <td> <div class=\\\"progress-indicator \\\" style=\\\"width: 114px\\\" title=\\\"\\\" rel=\\\"285\\\" value=\\\"285\\\" levels=\\\"speed\\\"> <div class=\\\"indicator\\\" style=\\\"width: 94%; background-color: rgb(0, 173, 173)\\\"><\\/div> <\\/div> <\\/td> <td>HTTP<\\/td> <td nowrap>High +KA<\\/td> <\\/tr> <tr class=\\\"\\\" rel=\\\"20257530\\\"> <td class=\\\"leftborder timestamp\\\" rel=\\\"1445766035\\\"><span class=\\\"updatets \\\">4mins<\\/span><\\/td> <td><span><style>.C4A6{display:none}\\n.c6tT{display:inline}\\n.vLp0{display:none}\\n.rfNi{display:inline}<\\/style><span class=\\\"C4A6\\\">4<\\/span><span><\\/span><span style=\\\"display: inline\\\">79<\\/span><span style=\\\"display:none\\\">151<\\/span><span class=\\\"C4A6\\\">151<\\/span><span style=\\\"display:none\\\">175<\\/span><div style=\\\"display:none\\\">175<\\/div><span style=\\\"display:none\\\">176<\\/span><span class=\\\"C4A6\\\">176<\\/span><span><\\/span>.<span class=\\\"111\\\">120<\\/span><span><\\/span><span style=\\\"display: inline\\\">.<\\/span><span style=\\\"display: inline\\\">10<\\/span><div style=\\\"display:none\\\">120<\\/div><span class=\\\"C4A6\\\">185<\\/span><span style=\\\"display: inline\\\">.<\\/span><span class=\\\"32\\\">136<\\/span><span style=\\\"display:none\\\">212<\\/span><div style=\\\"display:none\\\">212<\\/div><\\/span><\\/td> <td>3128<\\/td> <td style=\\\"text-align:left\\\" rel=\\\"ru\\\"><span class=\\\"country\\\" style=\\\"white-space:nowrap;\\\"> <img src=\\\"\\/images\\/1x1.png\\\" style=\\\"width: 16px; height: 11px; margin-right: 5px;\\\" class=\\\"flags-ru\\\" alt=\\\"flag \\\"\\/>Russia<\\/span><\\/td> <td> <div class=\\\"progress-indicator\\\" style=\\\"width: 114px\\\" value=\\\"1107\\\" levels=\\\"speed\\\" rel=\\\"1107\\\"> <div class=\\\"indicator\\\" style=\\\"width: 89%; background-color: rgb(0, 173, 173)\\\"><\\/div><\\/div> <\\/td> <td> <div class=\\\"progress-indicator \\\" style=\\\"width: 114px\\\" title=\\\"\\\" rel=\\\"66\\\" value=\\\"66\\\" levels=\\\"speed\\\"> <div class=\\\"indicator\\\" style=\\\"width: 100%; background-color: rgb(0, 173, 173)\\\"><\\/div> <\\/div> <\\/td> <td>HTTPS<\\/td> <td nowrap>High +KA<\\/td> <\\/tr> <tr class=\\\"altshade\\\" rel=\\\"20257528\\\"> <td class=\\\"leftborder timestamp\\\" rel=\\\"1445766035\\\"><span class=\\\"updatets \\\">4mins<\\/span><\\/td> <td><span><style>.EGlk{display:none}\\n.crIJ{display:inline}\\n.OKyF{display:none}\\n.chYq{display:inline}\\n.ryEb{display:none}\\n.HqnN{display:inline}\\n.ZT1G{display:none}\\n.upBS{display:inline}<\\/style><span style=\\\"display:none\\\">85<\\/span><span class=\\\"ryEb\\\">85<\\/span><span style=\\\"display: inline\\\">95<\\/span><span class=\\\"126\\\">.<\\/span><div style=\\\"display:none\\\">172<\\/div>211<span style=\\\"display:none\\\">249<\\/span><div style=\\\"display:none\\\">249<\\/div><span class=\\\"248\\\">.<\\/span><span style=\\\"display:none\\\">114<\\/span><div style=\\\"display:none\\\">114<\\/div><span style=\\\"display:none\\\">137<\\/span><div style=\\\"display:none\\\">137<\\/div><span class=\\\"196\\\">206<\\/span><span style=\\\"display:none\\\">247<\\/span><div style=\\\"display:none\\\">247<\\/div><span style=\\\"display: inline\\\">.<\\/span><span class=\\\"EGlk\\\">139<\\/span><span><\\/span><span class=\\\"ZT1G\\\">149<\\/span><div style=\\\"display:none\\\">149<\\/div><span class=\\\"165\\\">151<\\/span><span class=\\\"ZT1G\\\">204<\\/span><div style=\\\"display:none\\\">204<\\/div><span style=\\\"display:none\\\">209<\\/span><span class=\\\"ryEb\\\">209<\\/span><div style=\\\"display:none\\\">209<\\/div><span style=\\\"display:none\\\">241<\\/span><span class=\\\"ryEb\\\">241<\\/span><div style=\\\"display:none\\\">241<\\/div><\\/span><\\/td> <td>80<\\/td> <td style=\\\"text-align:left\\\" rel=\\\"nl\\\"><span class=\\\"country\\\" style=\\\"white-space:nowrap;\\\"> <img src=\\\"\\/images\\/1x1.png\\\" style=\\\"width: 16px; height: 11px; margin-right: 5px;\\\" class=\\\"flags-nl\\\" alt=\\\"flag \\\"\\/>Netherlands<\\/span><\\/td> <td> <div class=\\\"progress-indicator\\\" style=\\\"width: 114px\\\" value=\\\"3748\\\" levels=\\\"speed\\\" rel=\\\"3748\\\"> <div class=\\\"indicator\\\" style=\\\"width: 63%; background-color: rgb(255, 204, 0)\\\"><\\/div><\\/div> <\\/td> <td> <div class=\\\"progress-indicator \\\" style=\\\"width: 114px\\\" title=\\\"\\\" rel=\\\"3017\\\" value=\\\"3017\\\" levels=\\\"speed\\\"> <div class=\\\"indicator\\\" style=\\\"width: 40%; background-color: rgb(255, 204, 0)\\\"><\\/div> <\\/div> <\\/td> <td>HTTP<\\/td> <td nowrap>High<\\/td> <\\/tr> <tr class=\\\"\\\" rel=\\\"20257524\\\"> <td class=\\\"leftborder timestamp\\\" rel=\\\"1445765823\\\"><span class=\\\"updatets \\\">8mins<\\/span><\\/td> <td><span><style>.QROj{display:none}\\n.ToUj{display:inline}\\n.JCSp{display:none}\\n.oPqd{display:inline}\\n.UAO1{display:none}\\n.m4If{display:inline}<\\/style>97<span class=\\\"QROj\\\">226<\\/span><span class=\\\"209\\\">.<\\/span><div style=\\\"display:none\\\">1<\\/div><div style=\\\"display:none\\\">50<\\/div><div style=\\\"display:none\\\">75<\\/div>107<span style=\\\"display:none\\\">148<\\/span><span class=\\\"QROj\\\">148<\\/span><div style=\\\"display:none\\\">148<\\/div><span style=\\\"display:none\\\">167<\\/span><span class=\\\"JCSp\\\">167<\\/span><div style=\\\"display:none\\\">167<\\/div><div style=\\\"display:none\\\">197<\\/div><span style=\\\"display:none\\\">209<\\/span><div style=\\\"display:none\\\">209<\\/div><span style=\\\"display:none\\\">219<\\/span><span class=\\\"155\\\">.<\\/span><span class=\\\"JCSp\\\">81<\\/span><div style=\\\"display:none\\\">81<\\/div><span class=\\\"ToUj\\\">128<\\/span><span class=\\\"ToUj\\\">.<\\/span><span style=\\\"display:none\\\">26<\\/span><div style=\\\"display:none\\\">26<\\/div><span class=\\\"77\\\">161<\\/span><\\/span><\\/td> <td>3128<\\/td> <td style=\\\"text-align:left\\\" rel=\\\"us\\\"><span class=\\\"country\\\" style=\\\"white-space:nowrap;\\\"> <img src=\\\"\\/images\\/1x1.png\\\" style=\\\"width: 16px; height: 11px; margin-right: 5px;\\\" class=\\\"flags-us\\\" alt=\\\"flag \\\"\\/>USA<\\/span><\\/td> <td> <div class=\\\"progress-indicator\\\" style=\\\"width: 114px\\\" value=\\\"3759\\\" levels=\\\"speed\\\" rel=\\\"3759\\\"> <div class=\\\"indicator\\\" style=\\\"width: 62%; background-color: rgb(255, 204, 0)\\\"><\\/div><\\/div> <\\/td> <td> <div class=\\\"progress-indicator \\\" style=\\\"width: 114px\\\" title=\\\"\\\" rel=\\\"98\\\" value=\\\"98\\\" levels=\\\"speed\\\"> <div class=\\\"indicator\\\" style=\\\"width: 100%; background-color: rgb(0, 173, 173)\\\"><\\/div> <\\/div> <\\/td> <td>HTTPS<\\/td> <td nowrap>High +KA<\\/td> <\\/tr> <tr class=\\\"altshade\\\" rel=\\\"20257525\\\"> <td class=\\\"leftborder timestamp\\\" rel=\\\"1445765823\\\"><span class=\\\"updatets \\\">8mins<\\/span><\\/td> <td><span><style>.qxcU{display:none}\\n.NlY8{display:inline}\\n.Y2Z4{display:none}\\n.FRIl{display:inline}\\n.VntI{display:none}\\n.Lm3x{display:inline}\\n.AzLJ{display:none}\\n.wXqD{display:inline}<\\/style><span style=\\\"display: inline\\\">198<\\/span><span class=\\\"155\\\">.<\\/span><span style=\\\"display:none\\\">18<\\/span><span class=\\\"qxcU\\\">18<\\/span><div style=\\\"display:none\\\">18<\\/div><span class=\\\"AzLJ\\\">118<\\/span><span><\\/span><span class=\\\"241\\\">169<\\/span><span class=\\\"192\\\">.<\\/span><span style=\\\"display:none\\\">54<\\/span><div style=\\\"display:none\\\">117<\\/div><span style=\\\"display:none\\\">199<\\/span><div style=\\\"display:none\\\">199<\\/div><div style=\\\"display:none\\\">212<\\/div><span class=\\\"229\\\">246<\\/span><span style=\\\"display:none\\\">250<\\/span><div style=\\\"display:none\\\">250<\\/div>.<span style=\\\"display:none\\\">11<\\/span><span class=\\\"VntI\\\">11<\\/span><span><\\/span><span style=\\\"display: inline\\\">30<\\/span><\\/span><\\/td> <td>80<\\/td> <td style=\\\"text-align:left\\\" rel=\\\"ca\\\"><span class=\\\"country\\\" style=\\\"white-space:nowrap;\\\"> <img src=\\\"\\/images\\/1x1.png\\\" style=\\\"width: 16px; height: 11px; margin-right: 5px;\\\" class=\\\"flags-ca\\\" alt=\\\"flag \\\"\\/>Canada<\\/span><\\/td> <td> <div class=\\\"progress-indicator\\\" style=\\\"width: 114px\\\" value=\\\"535\\\" levels=\\\"speed\\\" rel=\\\"535\\\"> <div class=\\\"indicator\\\" style=\\\"width: 95%; background-color: rgb(0, 173, 173)\\\"><\\/div><\\/div> <\\/td> <td> <div class=\\\"progress-indicator \\\" style=\\\"width: 114px\\\" title=\\\"\\\" rel=\\\"131\\\" value=\\\"131\\\" levels=\\\"speed\\\"> <div class=\\\"indicator\\\" style=\\\"width: 100%; background-color: rgb(0, 173, 173)\\\"><\\/div> <\\/div> <\\/td> <td>HTTP<\\/td> <td nowrap>High<\\/td> <\\/tr> <tr class=\\\"\\\" rel=\\\"20257526\\\"> <td class=\\\"leftborder timestamp\\\" rel=\\\"1445765823\\\"><span class=\\\"updatets \\\">8mins<\\/span><\\/td> <td><span><style>.pXg_{display:none}\\n.WuXJ{display:inline}\\n.RK5J{display:none}\\n.Lyat{display:inline}<\\/style><span><\\/span><span style=\\\"display:none\\\">32<\\/span><div style=\\\"display:none\\\">32<\\/div><span class=\\\"RK5J\\\">60<\\/span><div style=\\\"display:none\\\">60<\\/div><span style=\\\"display:none\\\">61<\\/span><span class=\\\"pXg_\\\">61<\\/span><span><\\/span><span style=\\\"display:none\\\">85<\\/span><div style=\\\"display:none\\\">85<\\/div><span style=\\\"display:none\\\">143<\\/span><span class=\\\"RK5J\\\">143<\\/span><span><\\/span><span class=\\\"pXg_\\\">180<\\/span><span><\\/span><div style=\\\"display:none\\\">204<\\/div><span class=\\\"RK5J\\\">215<\\/span><span><\\/span><span class=\\\"145\\\">219<\\/span><span class=\\\"pXg_\\\">231<\\/span><span><\\/span><span style=\\\"display:none\\\">234<\\/span><span><\\/span>.<span style=\\\"display:none\\\">19<\\/span><div style=\\\"display:none\\\">19<\\/div><span style=\\\"display:none\\\">46<\\/span><span class=\\\"RK5J\\\">46<\\/span><div style=\\\"display:none\\\">59<\\/div><span style=\\\"display:none\\\">75<\\/span><span class=\\\"RK5J\\\">75<\\/span><span style=\\\"display: inline\\\">93<\\/span><span style=\\\"display:none\\\">107<\\/span><span class=\\\"pXg_\\\">107<\\/span><div style=\\\"display:none\\\">107<\\/div><span style=\\\"display:none\\\">114<\\/span><span style=\\\"display:none\\\">117<\\/span><div style=\\\"display:none\\\">117<\\/div><span class=\\\"pXg_\\\">209<\\/span><span><\\/span>.<span style=\\\"display:none\\\">5<\\/span><span class=\\\"RK5J\\\">5<\\/span><div style=\\\"display:none\\\">5<\\/div><span style=\\\"display: inline\\\">183<\\/span><span style=\\\"display:none\\\">222<\\/span><div style=\\\"display:none\\\">222<\\/div><span class=\\\"WuXJ\\\">.<\\/span><span style=\\\"display: inline\\\">93<\\/span><\\/span><\\/td> <td>80<\\/td> <td style=\\\"text-align:left\\\" rel=\\\"my\\\"><span class=\\\"country\\\" style=\\\"white-space:nowrap;\\\"> <img src=\\\"\\/images\\/1x1.png\\\" style=\\\"width: 16px; height: 11px; margin-right: 5px;\\\" class=\\\"flags-my\\\" alt=\\\"flag \\\"\\/>Malaysia<\\/span><\\/td> <td> <div class=\\\"progress-indicator\\\" style=\\\"width: 114px\\\" value=\\\"6104\\\" levels=\\\"speed\\\" rel=\\\"6104\\\"> <div class=\\\"indicator\\\" style=\\\"width: 39%; background-color: rgb(255, 204, 0)\\\"><\\/div><\\/div> <\\/td> <td> <div class=\\\"progress-indicator \\\" style=\\\"width: 114px\\\" title=\\\"\\\" rel=\\\"256\\\" value=\\\"256\\\" levels=\\\"speed\\\"> <div class=\\\"indicator\\\" style=\\\"width: 95%; background-color: rgb(0, 173, 173)\\\"><\\/div> <\\/div> <\\/td> <td>HTTP<\\/td> <td nowrap>High<\\/td> <\\/tr> <tr class=\\\"altshade\\\" rel=\\\"20257523\\\"> <td class=\\\"leftborder timestamp\\\" rel=\\\"1445765823\\\"><span class=\\\"updatets \\\">8mins<\\/span><\\/td> <td><span><style>.RiUn{display:none}\\n.OzHZ{display:inline}\\n.p9JE{display:none}\\n.cR6W{display:inline}\\n.x9O0{display:none}\\n.r7cq{display:inline}<\\/style><span style=\\\"display:none\\\">153<\\/span><span class=\\\"x9O0\\\">153<\\/span><div style=\\\"display:none\\\">153<\\/div>220<span class=\\\"OzHZ\\\">.<\\/span>248<span style=\\\"display: inline\\\">.<\\/span><span style=\\\"display:none\\\">34<\\/span><div style=\\\"display:none\\\">34<\\/div><span style=\\\"display:none\\\">72<\\/span><span class=\\\"RiUn\\\">72<\\/span><div style=\\\"display:none\\\">72<\\/div><span><\\/span><span style=\\\"display:none\\\">103<\\/span><span class=\\\"RiUn\\\">103<\\/span><span style=\\\"display:none\\\">115<\\/span><div style=\\\"display:none\\\">115<\\/div><span style=\\\"display:none\\\">118<\\/span><span class=\\\"x9O0\\\">118<\\/span><div style=\\\"display:none\\\">118<\\/div><span style=\\\"display:none\\\">144<\\/span><div style=\\\"display:none\\\">144<\\/div><span><\\/span><span style=\\\"display:none\\\">169<\\/span><div style=\\\"display:none\\\">169<\\/div><span class=\\\"RiUn\\\">177<\\/span><span style=\\\"display:none\\\">188<\\/span><span class=\\\"41\\\">224<\\/span><span class=\\\"p9JE\\\">247<\\/span>.<span class=\\\"x9O0\\\">14<\\/span><div style=\\\"display:none\\\">14<\\/div><span class=\\\"RiUn\\\">123<\\/span><span><\\/span><span class=\\\"234\\\">242<\\/span><\\/span><\\/td> <td>8089<\\/td> <td style=\\\"text-align:left\\\" rel=\\\"cn\\\"><span class=\\\"country\\\" style=\\\"white-space:nowrap;\\\"> <img src=\\\"\\/images\\/1x1.png\\\" style=\\\"width: 16px; height: 11px; margin-right: 5px;\\\" class=\\\"flags-cn\\\" alt=\\\"flag \\\"\\/>China<\\/span><\\/td> <td> <div class=\\\"progress-indicator\\\" style=\\\"width: 114px\\\" value=\\\"1297\\\" levels=\\\"speed\\\" rel=\\\"1297\\\"> <div class=\\\"indicator\\\" style=\\\"width: 87%; background-color: rgb(0, 173, 173)\\\"><\\/div><\\/div> <\\/td> <td> <div class=\\\"progress-indicator \\\" style=\\\"width: 114px\\\" title=\\\"\\\" rel=\\\"421\\\" value=\\\"421\\\" levels=\\\"speed\\\"> <div class=\\\"indicator\\\" style=\\\"width: 92%; background-color: rgb(0, 173, 173)\\\"><\\/div> <\\/div> <\\/td> <td>HTTPS<\\/td> <td nowrap>High +KA<\\/td> <\\/tr>\",\"pagination\":\" <div class=\\\"row inner\\\">\\n                                            <ul class=\\\"pagination ng-scope\\\" ><li class=\\\"arrow previous unavailable\\\"><a><i><\\/i><\\/a><\\/li><li class=\\\"current\\\"><a>1<\\/a><\\/li><li><a href=\\\"\\/2\\\">2<\\/a><\\/li><li><a href=\\\"\\/3\\\">3<\\/a><\\/li><li><a href=\\\"\\/4\\\">4<\\/a><\\/li><li><a href=\\\"\\/5\\\">5<\\/a><\\/li><li><a href=\\\"\\/6\\\">6<\\/a><\\/li><li><a href=\\\"\\/7\\\">7<\\/a><\\/li><li><a href=\\\"\\/8\\\">8<\\/a><\\/li><li class=\\\"arrow next\\\"><a href=\\\"\\/2\\\" class=\\\"next\\\"><i><\\/i><\\/a><\\/li><\\/ul><\\/div>\\n \",\"url\":false}';

			hidemyass.parseResponseData(data, function(error, proxies) {

				try {

					expect(error).to.equal(null);
					expect(proxies).to.be.an('array');
					expect(proxies).to.have.length(10);

					var invalidProxies = [];

					_.each(proxies, function(proxy) {

						try {

							expect(ProxyLists.isValidProxy(proxy)).to.equal(true);

						} catch (error) {

							invalidProxies.push(proxy);
						}
					});

					expect(invalidProxies).to.deep.equal([]);

				} catch (error) {
					return done(error);
				}

				done();
			});
		});
	});
});
